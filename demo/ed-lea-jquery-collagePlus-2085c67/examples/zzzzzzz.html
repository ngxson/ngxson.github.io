<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <title>CollagePlus for jQuery Example</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../support/examples.css" media="all" />
    <link rel="stylesheet" type="text/css" href="../css/transitions.css" media="all" />

    <!--[if lt IE 9]>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <![endif]-->
    <!--[if (gte IE 9) | (!IE)]><!-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <!--<![endif]-->

    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script src="../jquery.collagePlus.js"></script>
    <script src="../extras/jquery.removeWhitespace.js"></script>
    <script src="../extras/jquery.collageCaption.js"></script>
  
    <script type="text/javascript">

    // All images need to be loaded for this plugin to work so
    // we end up waiting for the whole window to load in this example
    $(window).load(function () {
        $(document).ready(function(){
            collage();
            $('.Collage').collageCaption();
        });
    });


    // Here we apply the actual CollagePlus plugin
    function collage() {
        $('.Collage').removeWhitespace().collagePlus(
            {
                'fadeSpeed'     : 500,
                'targetHeight'  : 300,
                //'effect'        : 'effect-6',
                'direction'     : 'vertical'
            }
        );
    };

    // This is just for the case that the browser window is resized
    var resizeTimer = null;
    $(window).bind('resize', function() {
        // hide all the images until we resize them
        $('.Collage .Image_Wrapper').css("opacity", 0);
        // set a timer to re-apply the plugin
        if (resizeTimer) clearTimeout(resizeTimer);
        resizeTimer = setTimeout(collage, 200);
    });

    </script>
	
	<style>
		img {
			/*height:300px;*/
			height:300px;
		}
		
		.Image_Wrapper {
			height:300px;
		}
	</style>
</head>
<body>
    <header class="header">
        <a class="return" href="http://collageplus.edlea.com">Back to plugin</a>
        <h1><a href="http://collageplus.edlea.com">CollagePlus jQuery Plugin Example</a></h1>
    </header>


<section class="Collage effect-parent" id="gallery">
	<div class="Image_Wrapper"><img src="img/10.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/9.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/8.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/7.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/6.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/5.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/4.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/3.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/2.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/1.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/10.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/9.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/8.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/7.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/6.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/5.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/4.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/3.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/2.jpg"/></div>
	<div class="Image_Wrapper"><img src="img/1.jpg"/></div>
</section>

<script>
var imgCount = 1;
$(window).scroll(function() {
	if($(window).scrollTop() + $(window).height() > $(document).height() - 50) {
		//$.each($('.Image_Wrapper'),function(i,e){e.removeAttribute('style')});
		var htmlToInject = $('#gallery').html();
		for (var i=0 ; i<20 ; i++) {
			htmlToInject += '<div class=\"Image_Wrapper\"><img src=\"img/' + imgCount + '.jpg"></div>';
			if (imgCount >= 100) imgCount = 1;
			else imgCount++;
		}
		$('#gallery').html(htmlToInject);
		setTimeout(collage, 200);
		//$('.Collage').collageCaption();
	}
});
</script>

    <p class="footnote"><a href="http://ed-lea.github.io/jquery-collagePlus/">CollagePlus</a> for jQuery by <a href="http://twitter.com/ed_lea">@ed_lea</a><br />Credits: Dynamic placeholder images by <a href="http://placehold.it/">http://placehold.it/</a> and colour schemes <a href="http://www.colourlovers.com/palette/92095/Giant_Goldfish">Giant Goldfish</a> and <a href="http://www.colourlovers.com/palette/694737/Thought_Provoking">Thought Provoking</a><br />Reveal Effects from <a href="http://tympanus.net/codrops/2013/07/02/loading-effects-for-grid-items-with-css-animations/">Codedrops</a></p>
</body>
</html>